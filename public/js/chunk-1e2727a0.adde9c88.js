(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e2727a0"],{"24e8":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",[r("el-form-item",{attrs:{label:"标题"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{size:"small"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),r("el-form-item",{attrs:{label:"分类"}},[r("el-select",{attrs:{size:"small",placeholder:"请选择分类"},model:{value:t.article.category_id,callback:function(e){t.$set(t.article,"category_id",e)},expression:"article.category_id"}},t._l(t.categories,function(t){return r("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}),1)],1),r("el-form-item",{attrs:{label:"正文"}},[r("markdown-edit",{ref:"md",attrs:{main:t.article.main},on:{"update:main":function(e){return t.$set(t.article,"main",e)}}})],1),r("el-form-item",[null===t.article.id?r("el-button",{staticStyle:{float:"right"},attrs:{size:"medium",type:"primary",loading:t.loading},on:{click:t.handleCreate}},[t._v("确认发布")]):r("el-button",{staticStyle:{float:"right"},attrs:{size:"medium",type:"primary",loading:t.loading},on:{click:t.handleEdit}},[t._v("确认编辑")])],1)],1)},i=[],n=(r("7f7f"),r("db72")),s=(r("0fb7"),r("450d"),r("f529")),c=r.n(s),l=(r("ac6a"),r("5df3"),r("96cf"),r("3b8d")),o=r("4360"),u=r("2f62"),d=r("31a0"),h=Object(u["a"])("article"),m=h.mapActions,p={name:"ArticleCreate",components:{MarkdownEdit:d["a"]},data:function(){return{loading:!1}},beforeRouteEnter:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,r,a){var i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=e.params.id,n=[o["a"].dispatch("category/getCategories")],i&&n.push(o["a"].dispatch("article/getArticle",i)),t.next=5,Promise.all(n).then(function(){a()}).catch(function(t){c.a.error(t.response.data.message)});case 5:case"end":return t.stop()}},t)}));function e(e,r,a){return t.apply(this,arguments)}return e}(),methods:Object(n["a"])({},m(["storeArticle","updateArticle"]),{handleCreate:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,t.prev=3,t.next=6,this.storeArticle(this.article);case 6:this.loading=!1,this.$router.push("/admin/articles"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](3),this.loading=!1,this.$message.error(t.t0.response.data.message);case 14:case"end":return t.stop()}},t,this,[[3,10]])}));function e(){return t.apply(this,arguments)}return e}(),handleEdit:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,r,a,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loading){t.next=2;break}return t.abrupt("return");case 2:return this.loading=!0,e=this.article,r=e.title,a=e.category_id,i=e.main,n={id:this.$route.params.id,data:{title:r,category_id:a,main:i}},t.prev=5,t.next=8,this.updateArticle(n);case 8:this.loading=!1,this.$router.push("/admin/articles"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](5),this.loading=!1,this.$message.error(t.t0.response.data.message);case 16:case"end":return t.stop()}},t,this,[[5,12]])}));function e(){return t.apply(this,arguments)}return e}()}),watch:{$route:function(t){"article-create"===t.name&&this.$store.dispatch("article/initArticle"),this.$refs.md.content=this.article.main}},computed:{categories:function(){return this.$store.state.category.list},article:function(){return this.$store.state.article.article}}},f=p,g=r("2877"),b=Object(g["a"])(f,a,i,!1,null,null,null);e["default"]=b.exports},"5df3":function(t,e,r){"use strict";var a=r("02f4")(!0);r("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=a(e,r),this._i+=t.length,{value:t,done:!1})})}}]);
//# sourceMappingURL=chunk-1e2727a0.adde9c88.js.map